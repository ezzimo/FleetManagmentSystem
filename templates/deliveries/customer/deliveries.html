{% extends "../../account/sub_base.html" %}
{% block title %}
<title>Livraisons liste</title>
<style media="screen">
  #body-table tr:nth-child(odd) {
    background: #F2F2F2;
  }

  #body-table tr:nth-child(even) {
    background: #CDBB79;
  }
</style>
{% endblock title %}
{% block content %}
<div class="container">
  <div class="d-grid gap-2">
    <h1>Liste des Livraisons </h1>
  </div>
  <div class="container">
    {% csrf_token %}
    <table class="table table-hover" border="2">
      <thead class="table-dark">
        <th>Client</th>
        <th>Ville de Ramassage </th>
        <th>Ville Destination</th>
        <th>Date d'Opération</th>
        <th>Heure</th>
        <th>Kilometrage </th>
        <th>Durée</th>
        <th>Status Livraison</th>
        <th>Action</th>
      </thead>
      <tbody id="body-table">
        {% for delivery in delivery_list %}
        <tr>
          <td> <a href={{delivery.get_absolute_url}}>{{ delivery.user}}</a> </td>
          <td>{{ delivery.pickup_address.town_city}}</td>
          <td>{{ delivery.destination_address.town_city}}</td>
          <td>{{ delivery.operation_date|date:"d-M-Y" }}</td>
          <td>{{ delivery.operation_time}}</td>
          <td>{{ delivery.geo_distance_value }} Km ou de google: {{ delivery.google_distance_value }} km</td>
          <td>{{ delivery.distance.google_duration }}</td>
          <td>{{ delivery.delivery_status|yesno:"Livrée,Non" }}</td>
          <td>
            <a href="{% url 'delivery:update-delivery' delivery.id %}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path>
                <polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon>
              </svg>
            </a>
            <a href="{% url 'delivery:delete-delivery' delivery.id %}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    {% block pagination %}
    {% if is_paginated %}
    <div class="pagination">
      <span class="page-links">
        {% if page_obj.has_previous %}
        <a href="{{ request.path }}?page={{ page_obj.previous_page_number }}">précédente</a>
        {% endif %}
        <span class="page-current">
          Page {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
        </span>
        {% if page_obj.has_next %}
        <a href="{{ request.path }}?page={{ page_obj.next_page_number }}">suivante</a>
        {% endif %}
      </span>
    </div>
    {% endif %}
    {% endblock %}
  </div>
</div>

{% endblock content %}